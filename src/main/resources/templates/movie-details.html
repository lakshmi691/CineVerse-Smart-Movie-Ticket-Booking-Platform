<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments :: head}"></head>

<body>
    <div th:replace="~{fragments :: navbar}"></div>

    <!-- Cinematic Header -->
    <div class="movie-header"
        style="position:relative; width:100%; min-height:60vh; overflow:hidden; margin-top:80px; display:flex; align-items:center; justify-content:center;">
        <div class="header-blur-bg"
            th:style="'background: url(' + ${movie.imageUrl} + ') center/cover no-repeat; position:absolute; top:0; left:0; width:100%; height:100%; filter: blur(30px) brightness(0.3); transform: scale(1.1); z-index:-1;'">
        </div>
        <div class="container"
            style="display:flex; align-items:center; gap:60px; padding:40px 5%; position:relative; z-index:1;">
            <div class="header-poster" style="flex-shrink:0;">
                <img th:src="${movie.imageUrl}"
                    style="height:450px; width:300px; object-fit:cover; border-radius:24px; box-shadow: var(--shadow-premium); border: 1px solid rgba(255,255,255,0.1);">
            </div>
            <div class="header-content" style="flex-grow:1;">
                <nav style="margin-bottom:25px; font-size:0.9rem; color:var(--text-secondary); opacity:0.8;">
                    <a href="/" style="color:var(--accent-color);">Home</a> / Browse / <span th:text="${movie.title}"
                        style="color:var(--text-primary);"></span>
                </nav>
                <div style="display:flex; gap:12px; margin-bottom:20px;">
                    <span class="genre-badge"
                        style="position:static; background:var(--accent-color); color:black; padding:6px 16px; border-radius:30px;"
                        th:text="${movie.genre}"></span>
                    <span class="rating-badge"
                        style="position:static; background:rgba(255,255,255,0.05); color:var(--text-primary); border-color:rgba(255,255,255,0.2); padding:6px 16px; border-radius:30px;"
                        th:text="${movie.rating}"></span>
                </div>
                <h1 style="font-size:4.5rem; font-weight:800; text-transform:uppercase; margin:0; line-height:1; letter-spacing:-2px;"
                    th:text="${movie.title}"></h1>
                <p style="font-size:1.15rem; color:var(--text-secondary); max-width:700px; margin-top:20px; line-height:1.6;"
                    th:text="${movie.description}"></p>
                <div class="movie-meta-container"
                    style="display:flex; gap:20px; margin-top:35px; align-items: center; flex-wrap: wrap;">
                    <div
                        style="display:flex; align-items:center; gap:12px; background:rgba(255,255,255,0.05); padding:12px 25px; border-radius:15px; border:1px solid rgba(255,255,255,0.1); backdrop-filter:blur(20px);">
                        <i class="far fa-clock" style="color:var(--accent-color); font-size:1.3rem;"></i>
                        <span style="font-weight:600; font-size:1.1rem;" th:text="${movie.durationMin} + ' Min'"></span>
                    </div>
                    <div
                        style="display:flex; align-items:center; gap:12px; background:rgba(255,255,255,0.05); padding:12px 25px; border-radius:15px; border:1px solid rgba(255,255,255,0.1); backdrop-filter:blur(20px);">
                        <i class="far fa-calendar-alt" style="color:var(--accent-color); font-size:1.3rem;"></i>
                        <span style="font-weight:600; font-size:1.1rem;" th:text="${movie.releaseDate}"></span>
                    </div>
                    <a th:href="${session.user != null ? '/watchlist/add/' + movie.id : '/login'}" class="btn-watchlist"
                        style="display:flex; align-items:center; gap:12px; background:var(--accent-color); color:black; padding:15px 35px; border-radius:15px; font-weight:800; transition:0.3s; text-decoration:none; box-shadow: 0 10px 20px rgba(212,175,55,0.3);">
                        <i class="fas fa-heart"></i> Add to Watchlist
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="container booking-container" style="margin-top: 40px;">
        <!-- Sidebar -->
        <div class="booking-sidebar">
            <div th:unless="${movie.upcoming}"
                style="background:var(--card-bg); padding:30px; border-radius:30px; border:1px solid var(--glass-border); box-shadow: var(--shadow-premium); position:sticky; top:120px;">
                <h3 style="color:var(--accent-color); margin-bottom:20px; font-size:1.4rem;">Booking Summary</h3>
                <div style="display:flex; flex-direction:column; gap:15px; margin-bottom:25px; font-size:0.95rem;">
                    <div style="display:flex; justify-content:space-between;">
                        <span style="color:var(--text-secondary);">Showtime</span>
                        <span id="sTime" style="font-weight:700;">Select Time</span>
                    </div>
                    <div style="display:flex; justify-content:space-between;">
                        <span style="color:var(--text-secondary);">Selected Seats</span>
                        <span id="sSeats" style="font-weight:700;">0</span>
                    </div>
                    <hr style="border:0; border-top:1px solid var(--glass-border);">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <span style="font-size:1.1rem;">Total Price</span>
                        <span style="font-size:1.8rem; color:var(--accent-color); font-weight:800;">‚Çπ<span
                                id="sTotal">0</span></span>
                    </div>
                </div>

                <input id="cName" placeholder="Full Name *" required
                    style="width:100%; padding:15px; margin-bottom:15px; background:rgba(255,255,255,0.03); color:white; border:1px solid var(--glass-border); border-radius:12px; outline:none;">
                <button class="btn-primary" onclick="pay()"
                    style="width:100%; margin:0; padding:15px; border-radius:15px; font-size:1.1rem; box-shadow: 0 10px 20px rgba(212,175,55,0.2);">Reserve
                    Now</button>
            </div>
        </div>

        <!-- Main -->
        <div class="booking-main">
            <!-- Trailer Section -->
            <div th:if="${movie.trailerUrl}" style="margin-bottom: 40px;">
                <h2 style="margin-bottom:15px;">Watch Trailer</h2>
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                    <iframe th:src="${movie.trailerUrl}"
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen></iframe>
                </div>
            </div>

            <div th:if="${movie.upcoming}">
                <div
                    style="background:var(--card-bg); padding:40px; border-radius:15px; text-align:center; border:2px dashed var(--accent-color);">
                    <h2 style="color:var(--accent-color); margin-bottom:10px;">Coming Soon!</h2>
                    <p th:text="'This movie is scheduled for release on ' + ${movie.releaseDate}"></p>
                    <p style="margin-top:20px; color:var(--text-secondary);">Tickets will be available for booking
                        shortly.</p>
                </div>
            </div>

            <div th:unless="${movie.upcoming}">
                <!-- STEP 1: SELECT THEATER -->
                <div id="theaterSelectionSection">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                        <h2 style="margin:0;">Select Theater</h2>
                        <button onclick="openLocationModal()"
                            style="background:rgba(255,255,255,0.1); border:1px solid var(--accent-color); color:var(--text-primary); cursor:pointer; font-size:0.9rem; padding:8px 16px; border-radius:20px; transition:0.3s; display:flex; align-items:center; gap:8px;">
                            <span style="font-size:1.1rem;">üìç</span> <span id="currentLocationDisplay">Change
                                Location</span>
                        </button>
                    </div>
                    <div id="theaterList" style="display:grid; gap:20px;">
                        <!-- Theaters will be rendered here via JS -->
                    </div>
                </div>

                <!-- Location modal removed (now global in fragments.html) -->

                <!-- STEP 2: SELECT TIME & SEATS (Hidden Initially) -->
                <div id="bookingSection" style="display:none; animation: fadeIn 0.5s;">
                    <button onclick="backToTheaters()" class="btn-primary"
                        style="background:var(--card-bg); margin-bottom:20px; padding:10px 20px; font-size:0.9rem;">
                        ‚Üê Change Theater
                    </button>

                    <h3 id="selectedTheaterName" style="color:var(--accent-color); margin-bottom:20px;">Theater Name
                    </h3>

                    <h2 style="margin-bottom:20px;">Select Showtime</h2>
                    <div id="times" style="display:flex; gap:10px; margin-bottom:40px; flex-wrap:wrap;"></div>

                    <h2 style="margin-bottom:20px;">Select Seats</h2>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="dot" style="background:var(--seat-bg)"></div> Available
                        </div>
                        <div class="legend-item">
                            <div class="dot" style="background:var(--seat-booked)"></div> Booked
                        </div>
                        <div class="legend-item">
                            <div class="dot" style="background:var(--seat-selected)"></div> Selected
                        </div>
                    </div>

                    <div class="screen-curve"
                        style="height:50px; background:linear-gradient(to bottom, var(--accent-color), transparent); margin-bottom:40px; opacity:0.3; border-radius:50% 50% 0 0;">
                    </div>

                    <!-- SEAT LAYOUT (Default Uniform) -->
                    <div id="seatContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        /*<![CDATA[*/
        // Dynamic showtimes from server
        const showtimesData = /*[[${showtimes}]]*/[];
        let curTime = null;
        let selected = [];

        // 1. Group Showtimes by Theater
        const theaters = {};
        showtimesData.forEach(s => {
            if (!theaters[s.theater.id]) {
                theaters[s.theater.id] = {
                    id: s.theater.id,
                    name: s.theater.name,
                    city: s.theater.city || 'Unknown City',
                    address: s.theater.address || '',
                    showtimes: []
                };
            }
            theaters[s.theater.id].showtimes.push(s);
        });

        // 2. Render Theater List
        // Location check is now handled globally by fragments.html

        const theaterListEl = document.getElementById('theaterList');
        if (showtimesData.length === 0) {
            theaterListEl.innerHTML = `
                <div style="text-align:center; padding:40px; background:var(--card-bg); border-radius:15px; border:1px solid var(--glass-border);">
                    <p style="color:var(--text-secondary); margin-bottom:20px; font-size:1.1rem;">Select your location to see available showtimes for this movie.</p>
                    <button onclick="openLocationModal()" class="btn-primary" style="padding:12px 30px; border-radius:12px; font-size:1rem; box-shadow: 0 5px 15px rgba(212,175,55,0.3);">
                        <i class="fas fa-map-marker-alt" style="margin-right:8px;"></i> Select Location
                    </button>
                </div>
            `;
        } else {
            Object.values(theaters).forEach(t => {
                const div = document.createElement('div');
                div.style = "background:var(--card-bg); padding:20px; border-radius:15px; border:1px solid var(--glass-border); cursor:pointer; transition:0.3s; box-shadow:0 4px 15px rgba(0,0,0,0.2);";
                div.onmouseover = () => div.style.borderColor = 'var(--accent-color)';
                div.onmouseout = () => div.style.borderColor = 'var(--glass-border)';
                div.innerHTML = `
                    <h3 style="margin:0 0 5px 0;">${t.name}</h3>
                    <p style="color:var(--text-secondary); margin:0;">üìç ${t.city} <span style="opacity:0.5; margin:0 5px;">|</span> ${t.address}</p>
                    <div style="margin-top:15px; display:flex; gap:10px; flex-wrap:wrap;">
                        ${t.showtimes.map(s => `
                            <span style="background:rgba(255,255,255,0.1); padding:5px 10px; border-radius:5px; font-size:0.8rem;">
                                ${new Date(s.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                            </span>
                        `).join('')}
                    </div>
                `;
                div.onclick = () => selectTheater(t);
                theaterListEl.appendChild(div);
            });
        }

        function selectTheater(theater) {
            // Switch Views
            document.getElementById('theaterSelectionSection').style.display = 'none';
            document.getElementById('bookingSection').style.display = 'block';
            document.getElementById('selectedTheaterName').innerText = `üìç ${theater.name}, ${theater.city}`;

            // Render Showtimes for this theater
            const timesContainer = document.getElementById('times');
            timesContainer.innerHTML = '';

            theater.showtimes.forEach(s => {
                let btn = document.createElement('button');
                btn.innerText = new Date(s.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                btn.className = 'btn-primary';
                btn.style.margin = '0';
                btn.style.background = '#333';
                btn.style.color = '#fff';

                // Attach pricing info to the object for later use
                const timeObj = {
                    id: s.id,
                    time: btn.innerText,
                    silver: s.priceSilver,
                    gold: s.priceGold,
                    prem: s.pricePremium
                };

                btn.onclick = () => {
                    curTime = timeObj;
                    document.getElementById('sTime').innerText = curTime.time;
                    document.querySelectorAll('#times button').forEach(b => b.style.background = '#333');
                    btn.style.background = 'var(--accent-color)';
                    btn.style.color = 'black';
                    renderAllSections(true);
                };
                timesContainer.appendChild(btn);
            });
        }

        function backToTheaters() {
            document.getElementById('theaterSelectionSection').style.display = 'block';
            document.getElementById('bookingSection').style.display = 'none';
            document.getElementById('seatContainer').innerHTML = ''; // Clear seats
            curTime = null;
            selected = [];
            updateSumm();
            document.getElementById('sTime').innerText = 'Select Time';
        }

        renderAllSections(false);

        // CONDITIONAL LOCATION MODAL ON LOAD
        // Requirement: Ask for location 1st time (if not set), do not ask 2nd time (if set).
        setTimeout(() => {
            // Check if city cookie is missing
            if (document.cookie.indexOf('city=') === -1) {
                openLocationModal();
            }
        }, 500);

        async function renderAllSections(isInteractive) {
            const container = document.getElementById('seatContainer');
            container.innerHTML = '';
            selected = [];
            updateSumm();

            if (!isInteractive || !curTime) {
                // Show placeholder message when no showtime selected
                container.innerHTML = '<p style="text-align:center; color:var(--text-secondary); padding:40px;">Please select a showtime to view available seats</p>';
                return;
            }

            try {
                // Fetch real seat data from API
                const response = await fetch(`/api/seats/${curTime.id}`);
                const data = await response.json();
                const seats = data.seats;

                // Group seats by type
                const premiumSeats = seats.filter(s => s.seatType === 'PREMIUM');
                const goldSeats = seats.filter(s => s.seatType === 'GOLD');
                const silverSeats = seats.filter(s => s.seatType === 'SILVER');

                // Render each section
                if (premiumSeats.length > 0) {
                    createSectionFromSeats(container, 'Premium Class', premiumSeats, curTime.prem);
                }
                if (goldSeats.length > 0) {
                    createSectionFromSeats(container, 'Gold Class', goldSeats, curTime.gold);
                }
                if (silverSeats.length > 0) {
                    createSectionFromSeats(container, 'Silver Class', silverSeats, curTime.silver);
                }
            } catch (error) {
                console.error('Error fetching seats:', error);
                container.innerHTML = '<p style="text-align:center; color:red; padding:40px;">Error loading seats. Please try again.</p>';
            }
        }

        function createSectionFromSeats(root, title, seatList, price) {
            let titleDiv = document.createElement('div');
            titleDiv.className = 'seat-section-title';
            titleDiv.innerText = `${title} (‚Çπ${price})`;
            root.appendChild(titleDiv);

            // Calculate grid dimensions based on seat numbers
            const maxRow = Math.max(...seatList.map(s => parseInt(s.seatNumber.split('-')[0].substring(1))));
            const maxCol = Math.max(...seatList.map(s => parseInt(s.seatNumber.split('-')[1])));

            let grid = document.createElement('div');
            grid.className = 'seat-grid';

            // Create grid by rows
            for (let r = 1; r <= maxRow; r++) {
                let row = document.createElement('div');
                row.className = 'seat-row';

                for (let c = 1; c <= maxCol; c++) {
                    // Find the seat for this position
                    const seat = seatList.find(s => s.seatNumber === `${seatList[0].seatNumber[0]}${r}-${c}`);

                    if (seat) {
                        let s = document.createElement('div');
                        s.className = 'seat';
                        s.innerText = seat.seatNumber;

                        if (seat.isBooked) {
                            s.classList.add('occupied');
                        } else {
                            s.onclick = () => {
                                if (s.classList.contains('selected')) {
                                    s.classList.remove('selected');
                                    selected = selected.filter(x => x.num !== seat.seatNumber);
                                } else {
                                    s.classList.add('selected');
                                    selected.push({ el: s, price: seat.price, num: seat.seatNumber });
                                }
                                updateSumm();
                            };
                        }
                        row.appendChild(s);
                    }
                }
                grid.appendChild(row);
            }
            root.appendChild(grid);
        }
        function updateSumm() {
            document.getElementById('sSeats').innerText = selected.length;
            document.getElementById('sTotal').innerText = selected.reduce((a, b) => a + b.price, 0);
        }

        function pay() {
            if (!curTime) return alert("Please select a showtime first!");
            if (selected.length === 0) return alert("Please select seats.");

            // MANDATORY NAME CHECK
            const cName = document.getElementById('cName').value.trim();
            if (!cName) {
                alert("Please enter Your Name to proceed.");
                document.getElementById('cName').focus();
                return;
            }

            fetch('/api/bookings', {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    showtimeId: curTime.id, // USE DYNAMIC ID
                    customerName: cName,
                    seatNumbers: selected.map(s => s.num).join(', '),
                    totalPrice: parseFloat(document.getElementById('sTotal').innerText)
                })
            }).then(async r => {
                if (r.status === 401) {
                    alert("You must be logged in to book tickets.");
                    window.location.href = '/login';
                    return;
                }
                if (r.ok) {
                    alert("Payment Successful! Booking Confirmed.");
                    window.location = '/my-bookings';
                } else {
                    const err = await r.json();
                    alert("Error: " + (err.message || 'Payment processing failed.'));
                }
            }).catch(e => {
                console.error(e);
                alert("Network error or server unavailable.");
            });
        }
        /*]]>*/
    </script>

    <!-- Reviews Section -->
    <div class="container" style="margin-top:60px;">
        <h2>Reviews & Ratings</h2>
        <div style="display:flex; align-items:center; gap:15px; margin:20px 0;">
            <div style="font-size:3rem; font-weight:bold; color:var(--accent-color);"
                th:text="${#numbers.formatDecimal(averageRating, 1, 1)}">4.5</div>
            <div>
                <div class="stars" th:attr="data-rating=${#numbers.formatDecimal(averageRating, 1, 0)}">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <p style="color:var(--text-secondary); margin:5px 0;" th:text="${#lists.size(reviews)} + ' reviews'">10
                    reviews</p>
            </div>
        </div>

        <!-- Submit Review Form -->
        <div th:if="${session.user != null}"
            style="background:var(--card-bg); padding:30px; border-radius:15px; margin:30px 0; border:1px solid var(--glass-border);">
            <h3 style="margin-bottom:20px;">Write a Review</h3>
            <div style="margin:15px 0; display:flex; align-items:center; gap:15px;">
                <label style="font-weight:600;">Your Rating:</label>
                <div class="star-rating" id="starRating">
                    <span data-rating="1">‚òÖ</span>
                    <span data-rating="2">‚òÖ</span>
                    <span data-rating="3">‚òÖ</span>
                    <span data-rating="4">‚òÖ</span>
                    <span data-rating="5">‚òÖ</span>
                </div>
            </div>
            <textarea id="reviewText" placeholder="Share your thoughts about this movie..." rows="4"
                style="width:100%; padding:15px; background:rgba(255,255,255,0.03); color:white; border:1px solid var(--glass-border); border-radius:12px; outline:none; font-family:inherit;"></textarea>
            <button class="btn-primary" onclick="submitReview()" style="margin-top:20px; padding:12px 30px;">Submit
                Review</button>
        </div>

        <!-- Login to Review Button -->
        <div th:unless="${session.user != null}"
            style="background:var(--card-bg); padding:40px; border-radius:15px; margin:30px 0; text-align:center; border:1px dashed var(--glass-border);">
            <p style="color:var(--text-secondary); margin-bottom:20px;">You must be logged in to share your thoughts
                about this movie.</p>
            <a href="/login" class="btn-primary"
                style="display:inline-block; text-decoration:none; padding:12px 30px; border-radius:12px;">Login to
                Review</a>
        </div>

        <!-- Reviews List -->
        <div id="reviewsList">
            <div th:each="review : ${reviews}"
                style="background:var(--card-bg); padding:20px; border-radius:15px; margin-bottom:20px;">
                <div style="display:flex; justify-content:space-between; align-items:start;">
                    <div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <strong th:text="${review.user.name}">User Name</strong>
                            <div class="stars" th:attr="data-rating=${review.rating}">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                        <p style="color:var(--text-secondary); font-size:0.9rem; margin:5px 0;"
                            th:text="${#temporals.format(review.createdAt, 'MMM dd, yyyy')}">Jan 01, 2024</p>
                    </div>
                </div>
                <p style="margin:15px 0;" th:text="${review.reviewText}">Great movie!</p>
                <div style="display:flex; gap:15px; color:var(--text-secondary); font-size:0.9rem;">
                    <button onclick="voteHelpful(this)" th:attr="data-review-id=${review.id}"
                        style="background:none; border:1px solid #444; color:var(--text-primary); padding:5px 15px; border-radius:5px; cursor:pointer;">
                        üëç Helpful (<span th:text="${review.helpfulCount}">0</span>)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .stars {
            color: gold;
            font-size: 1.2rem;
        }

        .star-rating span {
            font-size: 2rem;
            color: #444;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star-rating span:hover,
        .star-rating span.active {
            color: gold;
        }
    </style>

    <script th:inline="javascript">
        /*<![CDATA[*/
        let selectedRating = 0;
        const movieId = /*[[${movie.id}]]*/ 0;

        console.log("Review system initialized for Movie ID:", movieId);

        // Star rating interaction
        document.querySelectorAll('.star-rating span').forEach(star => {
            star.addEventListener('click', function () {
                selectedRating = parseInt(this.getAttribute('data-rating'));
                updateStars();
            });
            star.addEventListener('mouseover', function () {
                const rating = parseInt(this.getAttribute('data-rating'));
                highlightStars(rating);
            });
        });

        document.querySelector('.star-rating').addEventListener('mouseout', updateStars);

        function highlightStars(rating) {
            document.querySelectorAll('.star-rating span').forEach((star, index) => {
                star.classList.toggle('active', index < rating);
            });
        }

        function updateStars() {
            highlightStars(selectedRating);
        }

        async function submitReview() {
            if (selectedRating === 0) {
                alert('Please select a rating');
                return;
            }
            const reviewText = document.getElementById('reviewText').value.trim();
            if (!reviewText) {
                alert('Please write a review');
                return;
            }

            console.log("Submitting review for Movie ID:", movieId, "Rating:", selectedRating);

            try {
                const response = await fetch('/api/reviews', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ movieId, rating: selectedRating, reviewText })
                });

                if (response.ok) {
                    alert('Review submitted successfully!');
                    location.reload();
                } else {
                    const data = await response.json();
                    console.error("Submission failed:", data);
                    alert(data.message || 'Failed to submit review');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error submitting review. Check console for details.');
            }
        }

        async function voteHelpful(button) {
            const reviewId = button.getAttribute('data-review-id');
            try {
                const response = await fetch(`/api/reviews/${reviewId}/helpful`, { method: 'POST' });
                if (response.ok) {
                    const data = await response.json();
                    button.querySelector('span').textContent = data.helpfulCount;
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // Initialize star displays
        document.querySelectorAll('.stars').forEach(el => {
            const rating = parseFloat(el.getAttribute('data-rating'));
            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                starsHtml += i <= rating ? '‚òÖ' : '‚òÜ';
            }
            el.innerHTML = starsHtml;
        });
        /*]]>*/
    </script>

    <div th:replace="~{fragments :: bottom-nav}"></div>
    <div th:replace="~{fragments :: footer}"></div>
</body>

</html>