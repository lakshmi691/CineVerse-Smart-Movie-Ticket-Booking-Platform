<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments :: head}"></head>

<body>
    <div th:replace="~{fragments :: navbar}"></div>

    <div class="container" style="margin-top:40px;">
        <h1>Manage Theaters</h1>

        <!-- Add Theater Form -->
        <div
            style="background:var(--card-bg); padding:30px; border-radius:15px; margin:30px 0; border:1px solid var(--glass-border);">
            <h3 style="margin-bottom:20px;">Add New Theater</h3>
            <form action="/admin/theaters/add" method="post"
                style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                <div>
                    <label style="display:block; margin-bottom:10px;">Theater Name</label>
                    <input type="text" name="name" required placeholder="e.g. Grand Cinema"
                        style="width:100%; padding:10px; background:rgba(255,255,255,0.05); border:1px solid var(--glass-border); color:white; border-radius:8px;">
                </div>
                <div>
                    <label style="display:block; margin-bottom:10px;">City</label>
                    <input type="text" name="city" required placeholder="e.g. Mumbai"
                        style="width:100%; padding:10px; background:rgba(255,255,255,0.05); border:1px solid var(--glass-border); color:white; border-radius:8px;">
                </div>
                <div style="grid-column: span 2;">
                    <label style="display:block; margin-bottom:10px;">Address</label>
                    <input type="text" name="address" required placeholder="Full Address"
                        style="width:100%; padding:10px; background:rgba(255,255,255,0.05); border:1px solid var(--glass-border); color:white; border-radius:8px;">
                </div>
                <div>
                    <label style="display:block; margin-bottom:10px;">Rows (Global)</label>
                    <input type="number" name="rows" required value="4" min="1"
                        style="width:100%; padding:10px; background:rgba(255,255,255,0.05); border:1px solid var(--glass-border); color:white; border-radius:8px;">
                </div>
                <div>
                    <label style="display:block; margin-bottom:10px;">Cols (Global)</label>
                    <input type="number" name="cols" required value="10" min="1"
                        style="width:100%; padding:10px; background:rgba(255,255,255,0.05); border:1px solid var(--glass-border); color:white; border-radius:8px;">
                </div>
                <div style="grid-column: span 2;">
                    <button type="submit" class="btn-primary" style="width:100%;">Add Theater</button>
                </div>
            </form>
        </div>

        <!-- Theater List -->
        <h2 style="margin-top:40px;">Existing Theaters</h2>
        <div
            style="display:grid; grid-template-columns:repeat(auto-fill, minmax(300px, 1fr)); gap:20px; margin:20px 0;">
            <div th:each="theater : ${theaters}"
                style="background:var(--card-bg); padding:20px; border-radius:15px; border:1px solid var(--glass-border); position:relative;">
                <h3 th:text="${theater.name}" style="margin:0 0 10px 0;">Theater Name</h3>
                <p style="color:var(--text-secondary); margin:5px 0;">
                    üìç <span th:text="${theater.city}">City</span>
                </p>
                <p style="font-size:0.9rem; opacity:0.8;" th:text="${theater.address}">Address</p>
                <p style="margin-top:10px; font-weight:bold; color:gold;">
                    <span th:text="${theater.totalSeats}">0</span> Seats
                </p>

                <div style="margin-top:15px; display:flex; gap:10px; align-items:center;">
                    <a th:href="@{/admin/theaters/edit/{id}(id=${theater.id})}"
                        style="background:#4facfe; color:white; padding:0 15px; height:32px; border-radius:5px; text-decoration:none; display:flex; align-items:center; justify-content:center; font-size:0.85rem; border:none; cursor:pointer;">
                        Edit
                    </a>
                    <form th:action="@{/admin/theaters/delete/{id}(id=${theater.id})}" method="post"
                        style="margin:0; padding:0; height:32px;">
                        <button type="submit"
                            style="background:#f5576c; color:white; padding:0 15px; height:32px; border-radius:5px; display:flex; align-items:center; justify-content:center; font-size:0.85rem; border:none; cursor:pointer; font-family:inherit;"
                            onclick="return confirm('Are you sure? This might delete associated showtimes!')">
                            Delete
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <div style="margin:40px 0 20px 0; text-align: left;">
            <a href="/admin" class="btn-primary" style="background:#666; margin:0;">‚Üê Back to Dashboard</a>
        </div>
    </div>

    <div th:replace="~{fragments :: footer}"></div>
</body>

</html>